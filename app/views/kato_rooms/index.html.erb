
<body>
<h2>EXAMPLE PAGE</h2>
    <div class="KatoRoom">
       <iframe id="katoFrame"></iframe>
    </div>
</body>
<script type="text/javascript">
    function load(url, callback) {
        var xhr;

        if(typeof XMLHttpRequest !== 'undefined') xhr = new XMLHttpRequest();
        else {
            var versions = ["MSXML2.XmlHttp.5.0",
                "MSXML2.XmlHttp.4.0",
                "MSXML2.XmlHttp.3.0",
                "MSXML2.XmlHttp.2.0",
                "Microsoft.XmlHttp"]

            for(var i = 0, len = versions.length; i < len; i++) {
                try {
                    xhr = new ActiveXObject(versions[i]);
                    break;
                }
                catch(e){}
            } // end for
        }

        xhr.onreadystatechange = ensureReadiness;

        function ensureReadiness() {
            if(xhr.readyState < 4) {
                return;
            }

            if(xhr.status !== 200) {
                return;
            }

            // all is well
            if(xhr.readyState === 4) {
                callback(xhr);
            }
        }

        xhr.open('GET', url, true);
        xhr.send('');
    }
    load('/kato_rooms.json?userid=1&username=test_user&room_id=1&roomname=test_room&exp=3600', function(xhr) {
    	debugger;
        var object = JSON.parse(xhr.responseText);
        document.getElementById('katoFrame').src = "https://kato.im/adhoc#/EK1UcCeetSxCVAYEZw9zxr6iCHX0gm1JSSkamHVcxVQ/eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJleHAiOjEzOTkzMDcyMDQsInVzZXJfaWQiOm51bGwsInVzZXJfbmFtZSI6ImZvbyIsInJvb21faWQiOm51bGwsInJvb21fbmFtZSI6ImJhciJ9.k0Q51mw4iKVyoYP4n3rFCIPSv5awwYRejLlAYKzr6js";//object.JWTToken;
    });
</script>
        <script type="text/css">

        </script>